ModuloPersonaV2 As screen:

    Button25_5 As button:
        Fill: |-
            =If(
                _VarEquipo="MiEquipo",
                RGBA(22, 196, 247,1),
                RGBA(56, 96, 178, 1)
            )
        OnSelect: |-
            =Patch(
                Lst_ConfirmacionManagersF30,
                LookUp(Lst_ConfirmacionManagersF30,ID=Value(Param("ID_Request"))),
                {
                    Fechaconfirmacion:Today(),
                    Bitacora_Cambios:Var_BitacoraCambios
            
                }
            )
        Text: ="Mi Equipo funcional"
        Visible: |-
            =If(
                LookUp(Col_BD_Persona, Usuario = _VarUsuarioJefe,GerenciaOrigen) = "GERENCIA INGENIERIA DE SOFTWARE",
                false,
                true
            )
        Width: =225
        X: =1377
        Y: =955
        ZIndex: =1

    Gp_CabeceraPersona_8 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =1

        Rct_FondoCabecera_Persona_15 As rectangle:
            Fill: =_VarColoresApp.AzulparaCabeceras
            Height: =60
            Width: =1920
            ZIndex: =4

        Img_UsuarioPantallaPersona_13 As image:
            Height: =50
            Image: =_UserFoto
            RadiusBottomLeft: =50
            RadiusBottomRight: =50
            RadiusTopLeft: |
                =50
            RadiusTopRight: =50
            Width: =54
            X: =1774
            Y: =5
            ZIndex: =5

    Button25_6 As button:
        DisplayMode: |-
            =If(
                  _VarUsuarioJefe in Col_UserPermiso.User || _VarRolUsuario = "ENGINEERING MANAGER III",
                  DisplayMode.Edit,
                  DisplayMode.Disabled
            )
        Fill: |-
            =If(
                _VarEquipo="EquiposVirtuales",
                RGBA(22, 196, 247,1),
                RGBA(56, 96, 178, 1)
            )
        OnSelect: |-
            =Set(_VarEquipo,"EquiposVirtuales");
            Navigate(ModuloEquipoV1,ScreenTransition.Fade)
        Text: ="Equipos virtuales"
        Width: =225
        X: =1620
        Y: =955
        ZIndex: =2

    Image4_3 As image:
        Height: =74
        Image: ='OddPreciousIndri-max-1mb'
        Width: =132
        X: =318
        Y: =74
        ZIndex: =3

    Button2_8 As button:
        Fill: =_VarColoresApp.VerdeParaBotones
        Height: =60
        HoverFill: =_VarColoresApp.AzulFondo
        OnSelect: |-
            =If(IsBlank(Back()),
            Navigate(Portada),
            Back()
            )
            /*
            If(
                !_VarMostrarBarraBloqueo;
                Reset(Rd_InternoExterno);;
                Reset(Cmb_BuscarMiEquipo);;
                UpdateContext({_VarMostrarEdicionEquipo:false});;
                Clear(Col_UsuariosporEquipo);;
                ResetForm(Frm_EditarEquipo);;
                Reset(Rd_PersonasEquipos);;
                Navigate(Portada;ScreenTransition.Fade);
                Notify("No puedes regresar a la pantalla anterior mientras se esta editando a un usuario";NotificationType.Warning;5000)
            )
            */
        PaddingTop: =2.5
        PressedFill: =_VarColoresApp.VerdeParaBotones
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =0
        RadiusTopRight: =0
        Size: =35
        Text: ="⬅"
        Tooltip: ="Regresar"
        Width: =83
        X: =1837
        ZIndex: =6

    Label13_23 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Semibold
        Height: =55
        Size: =25
        Text: ="Gestión de Personas"
        Visible: |-
            =If(
                _VarVerPopUpPortafolio,
                false,
                true
            )
        Width: =611
        X: =598
        Y: =2
        ZIndex: =7

    Label19_4 As label:
        Align: =Align.Center
        Font: =Font.Lato
        FontWeight: =FontWeight.Semibold
        Height: =60
        Size: =18
        Text: ="En tu equipo hay " & CountRows(Filter(Col_MiEquipoWalmart,'Interno/Externo' = "Interno")) & " colaboradores internos y " & CountRows(Filter(Col_MiEquipoWalmart,'Interno/Externo' = "Externo")) & " colaboradores externos, que son de tu responsabilidad."
        Width: =1408
        X: =263
        Y: =81
        ZIndex: =8

    Btn_AgregarExternos_2 As button:
        Fill: =RGBA(232, 46, 179, 1)
        HoverFill: =RGBA(255, 255, 255, 0.63)
        OnSelect: |
            =UpdateContext({_VarMostrarBarraBloqueo:true});
            Set(_VarNuevoIDPErsona,"Usu-" & GUID());
            Patch(Col_MiEquipoWalmart,Defaults(Col_MiEquipoWalmart),
            {
                'Interno/Externo':"Externo",
                ID_Proveedor:Cmb_BuscarPersona_5.Selected.ID,
                Nombre_Persona:" ",
                Tipo_Usuario:"Directorio Activo",
                Categoria:"Subcontratación Servicios"
            }
            )
        PaddingTop: =2.5
        PressedFill: =RGBA(255, 255, 255, 0.68)
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Size: =14
        Text: ="Agregar persona con cuenta WM"
        Tooltip: |
            =If(
                Rd_PersonasEquipos.Selected.Value = "Mis Equipos",
                "Agregar Nuevo Equipo",
                "Agregar Nueva Persona"
            )
        Visible: =_Var_ExternosPersonas
        Width: =310
        X: =1583
        Y: =241
        ZIndex: =9

    Label19_5 As label:
        Align: =Align.Center
        BorderColor: =RGBA(139, 154, 159, 1)
        BorderStyle: =BorderStyle.None
        BorderThickness: =1
        Fill: =RGBA(180, 214, 250, 0.15)
        Font: =Font.'Lato Hairline'
        FontWeight: =FontWeight.Semibold
        Height: =60
        Size: =18
        Text: ="Recuerda que los colaboradores internos se encuentran automatizados, mientras que los externos dependen de tu gestión"
        Width: =1275
        X: =62
        Y: =955
        ZIndex: =10

    Gallery2_2 As gallery.galleryVertical:
        DelayItemLoading: =true
        Height: =644
        Items: |-
            =Search(
                    SortByColumns(
                            Filter(
                            Col_MiEquipoWalmart,
                            'Interno/Externo'="Interno"
                            ),
                        "Nombre_Persona",
                        SortOrder.Ascending
                        ),
                        Txt_BuscadorPersona_2.Text,
                        Nombre_Persona,
                        Rol,
                        'Interno/Externo'
            )
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        TemplateSize: =74
        Visible: =!_Var_ExternosPersonas
        Width: =1811
        X: =62
        Y: =296
        ZIndex: =14

        TextInput14_1 As text:
            BorderColor: =RGBA(15, 108, 189, 1)
            Default: =""
            DisabledBorderColor: =RGBA(15, 108, 189, 1)
            DisabledFill: =If(ThisItem.'Interno/Externo'="Externo",RGBA(255, 255, 255, 1),RGBA(214, 221, 224, 1))
            DisplayMode: =DisplayMode.Disabled
            Fill: =If(ThisItem.'Interno/Externo'="Externo",RGBA(255, 255, 255, 1),RGBA(214, 221, 224, 1))
            Height: =67
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =20
            RadiusBottomRight: =20
            RadiusTopLeft: =20
            RadiusTopRight: =20
            Width: =1785
            Y: =7
            ZIndex: =1

        Button12 As button:
            DisplayMode: =DisplayMode.Disabled
            Fill: =RGBA(214, 221, 224, 1)
            Height: =67
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =0
            RadiusBottomRight: =20
            RadiusTopLeft: =0
            RadiusTopRight: =20
            Text: =
            Width: =185
            X: =1600
            Y: =7
            ZIndex: =2

        Image1_2 As image:
            Fill: =RGBA(219, 219, 219, 1)
            Height: =60
            Image: |-
                =If(
                    IsBlank(Cmb_BuscarPersona_4.Selected.Email),
                    'no-fotos-1',
                    If(
                        IsBlank(UsuariosdeOffice365.UserPhotoV2(Cmb_BuscarPersona_4.Selected.Email)),
                        'no-fotos-1',
                        UsuariosdeOffice365.UserPhotoV2(Cmb_BuscarPersona_4.Selected.Email)
                    )
                )
                /*
                If(
                    CountRows(Col_MiEquipoWalmart) > 0;
                    If(
                        Rd_PersonasEquipos.Selected.Value = "Mis Personas";
                        If(
                            IfError(IsBlank(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico'));false;IsBlank(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico')));
                            'no-fotos-1';
                           IfError(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico');'no-fotos-1';UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico'))
                        )
                    )
                )
                */
            ImagePosition: =ImagePosition.Fill
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =60
            RadiusBottomRight: =60
            RadiusTopLeft: =60
            RadiusTopRight: =60
            Width: =60
            X: =7
            Y: =10
            ZIndex: =3

        Cmb_BuscarPersona_4 As combobox:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(116, 116, 116, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            DefaultSelectedItems: |-
                =Table({DisplayName: ThisItem.Nombre_Persona, Email:ThisItem.'Correo Electrónico'})
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =If(ThisItem.'Interno/Externo'="Interno", RGBA(214, 221, 224, 1),RGBA(255, 255, 255, 1))
            DisplayFields: =["DisplayName","Email","Picture"]
            DisplayMode: =If(IsBlank(ThisItem.ID),DisplayMode.Edit,DisplayMode.Disabled)
            Height: |
                =40
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            Items: =Choices([@Lst_Persona].BuscarNombrePersona)
            OnChange: |
                =
                If(
                    IsBlank(_VarUsuarioSelect) && IsBlank(Cmb_BuscarMiEquipo.Selected.Usuario),
                    Clear(Col_EquiposPersonas);
                    //UpdateContext({_VarTempJefeDirecto:LookUp(Lst_Persona; Usuario = Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona.Selected.Claims;"@"); {Result: ThisRecord.Value})).Result;"|"); {Result: ThisRecord.Value})).Result;Jefe_Directo)});;
                    Collect(Col_EquiposPersonas,Filter(Col_BD_AsignacionEquipos, Usuario = Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_4.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result, Estado = "Activo"))
                );
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            PressedFill: =RGBA(0, 121, 187, 1)
            SearchFields: =["DisplayName"]
            SearchItems: =Choices(Lst_Persona.BuscarNombrePersona,Cmb_BuscarPersona_4.SearchText)
            SelectionFill: =RGBA(0, 121, 187, 1)
            SelectMultiple: =false
            Template: =ListItemTemplate.Person
            Tooltip: =
            Width: |+
                =300
                
            X: =77
            Y: =20
            ZIndex: =4

        Txt_Rut_3 As text:
            Align: =Align.Center
            BorderColor: =RGBA(128, 128, 128, 1)
            BorderThickness: =0
            Default: |-
                =If(
                    !IsBlank(ThisItem.ID),
                    ThisItem.RUT,
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_4.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),RUT)
                )
            DelayOutput: =true
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(214, 221, 224, 1)
            DisplayMode: =If(ThisItem.'Interno/Externo'="Externo",DisplayMode.Edit,DisplayMode.Disabled)
            PaddingLeft: =10
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Tooltip: =
            Width: =125
            X: =768
            Y: =20
            ZIndex: =6

        Dtp_FechaIngreso_3 As datepicker:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            DefaultDate: |-
                =If(
                    !IsBlank(ThisItem.ID),
                    ThisItem.'Fecha de Ingreso',
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_4.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),'Fecha de Ingreso')
                )
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(214, 221, 224, 1)
            DisplayMode: =If(ThisItem.'Interno/Externo'="Externo",DisplayMode.Edit,DisplayMode.Disabled)
            EndYear: =Year(Today())+100
            IconBackground: =RGBA(244, 244, 244, 1)
            IconFill: =RGBA(0, 121, 187, 1)
            IsEditable: =true
            PaddingBottom: =0
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            Size: =13
            StartYear: =1899
            Tooltip: =
            Width: =140
            X: =904
            Y: =20
            ZIndex: =7

        Separator As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =390
            Y: =15
            ZIndex: =8

        Separator_1 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =763
            Y: |
                =5+10
            ZIndex: =9

        Separator_2 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =897
            Y: |
                =5+10
            ZIndex: =10

        Separator_3 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =1057
            Y: =10+5
            ZIndex: =11

        Dpd_Genero_3 As combobox:
            BorderColor: =RGBA(128, 128, 128, 1)
            BorderStyle: =BorderStyle.None
            BorderThickness: =1
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(128, 128, 128, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            Default: |-
                ={Value:ThisItem.Genero}
            DefaultSelectedItems: |-
                =If(
                    !IsBlank(ThisItem.ID),
                    Table({Value:ThisItem.Genero}),
                    Table({Value:LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_4.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),Genero)})
                )
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(214, 221, 224, 1)
            DisplayFields: =["Value"]
            DisplayMode: =If(ThisItem.'Interno/Externo'="Externo",DisplayMode.Edit,DisplayMode.Disabled)
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            IsSearchable: =false
            Items: =["M","F"]
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            PressedFill: =RGBA(0, 121, 187, 1)
            SearchFields: =["Value"]
            SearchItems: =[]
            SelectionColor: =RGBA(0, 0, 0, 1)
            SelectionFill: =RGBA(255, 255, 255, 1)
            SelectMultiple: =false
            Tooltip: =
            Width: =70
            X: =1073
            Y: =20
            ZIndex: =12

        Separator_4 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =1149
            Y: =15
            ZIndex: =13

        Separator_5 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =1290
            Y: =15
            ZIndex: =14

        Cmb_Rol_3 As dropdown:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(149, 149, 149, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            Default: |-
                =If(
                    !IsBlank(ThisItem.ID),
                    ThisItem.Rol,
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_4.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),Rol)
                )
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(214, 221, 224, 1)
            DisplayMode: =If(ThisItem.'Interno/Externo'="Externo",DisplayMode.Edit,DisplayMode.Disabled)
            Height: =47
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            Items: =Sort(Rol,Roles,SortOrder.Ascending)
            PressedFill: =RGBA(0, 121, 187, 1)
            Size: =12
            Tooltip: =
            Width: =283
            X: =1301
            Y: =18
            ZIndex: =15

        Button13 As button:
            Height: =60
            OnSelect: |-
                =Patch(Col_MiEquipoWalmart,ThisItem,{Editando:!ThisItem.Editando})
            PaddingBottom: =10
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            RadiusBottomLeft: =45
            RadiusBottomRight: =45
            RadiusTopLeft: =45
            RadiusTopRight: =45
            Size: =10
            Text: =If( ThisItem.Editando,"Buscar persona", "Crear persona")
            Visible: =IsBlank(Cmb_BuscarPersona_4.Selected.Email)
            Width: =60
            X: =Image1_2.X
            Y: =Image1_2.Y
            ZIndex: =20

        "TextInputCanvas1 As 'Text input'":
            DisplayMode: =DisplayMode.Edit
            Height: =40
            Placeholder: ="Nombre de nueva Persona"
            Visible: =ThisItem.Editando
            Width: =300
            X: =77
            Y: =18
            ZIndex: =21

    Txt_BuscadorPersona_3 As text:
        BorderColor: =RGBA(53, 61, 63, 1)
        Default: =""
        Height: =46
        HintText: ="Buscar Persona, Rol o Tipo"
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Visible: =_Var_ExternosPersonas
        Width: =1
        X: =529
        Y: =219
        ZIndex: =15

    Cmb_BuscarPersona_5 As combobox:
        AccessibleLabel: ="."
        BorderColor: =
        BorderStyle: =BorderStyle.None
        BorderThickness: =0
        ChevronBackground: =RGBA(255, 255, 255, 1)
        ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
        ChevronDisabledFill: =RGBA(116, 116, 116, 1)
        ChevronFill: =RGBA(0, 121, 187, 1)
        ChevronHoverBackground: =RGBA(0, 121, 187, 1)
        DefaultSelectedItems: |-
            =/*Param DeepLink personas f30*/
            
            If(
                //Si viene de Bind valida a que ventana se dirige
                !IsBlank(Param("ID_Request")),
            
                    If(IsBlank(LookUp(Lst_ConfirmacionManagersF30,ID=Value(Param("ID_Request"))).Fechaconfirmacion),
                    Filter(Lst_Proveedores,ID=Value(LookUp(Lst_ConfirmacionManagersF30,ID=Value(Param("ID_Request"))).ID_Proveedor)),
                    Blank()
                    )
            
            )
        DisabledColor: =RGBA(53, 61, 63, 1)
        DisplayFields: =["Razon_Social"]
        Height: |
            =40
        HoverBorderColor: =RGBA(0, 121, 187, 1)
        InputTextPlaceholder: ="Seleccionar proveedor"
        Items: =SortByColumns(Lst_Proveedores,"Razon_Social",SortOrder.Ascending)
        OnChange: =
        PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
        PressedFill: =RGBA(0, 121, 187, 1)
        SearchFields: =["Razon_Social"]
        SearchItems: =Search(SortByColumns(Lst_Proveedores,"Razon_Social",SortOrder.Ascending),Cmb_BuscarPersona_5.SearchText,Razon_Social)
        SelectionFill: =RGBA(0, 121, 187, 1)
        SelectMultiple: =false
        Size: =15
        Tooltip: =
        Visible: =_Var_ExternosPersonas
        Width: =450
        X: =540
        Y: =219
        ZIndex: =16

    Gallery2_3 As gallery.galleryVertical:
        DelayItemLoading: =true
        Fill: =RGBA(255, 255, 255, 1)
        Height: =644
        Items: |-
            =Search(
                    SortByColumns(
                            Filter(
                            Col_MiEquipoWalmart,
                            ID_Proveedor=Text(Cmb_BuscarPersona_5.Selected.ID)||IsBlank(Cmb_BuscarPersona_5.Selected.ID),
                            'Interno/Externo'="Externo"
                            ),
                        "Nombre_Persona",
                        SortOrder.Ascending
                        ),
                        Txt_BuscadorPersona_2.Text,
                        Nombre_Persona,
                        Rol,
                        'Interno/Externo'
            )
        Layout: =Layout.Vertical
        LoadingSpinner: =LoadingSpinner.Data
        TemplateSize: =74
        Visible: =_Var_ExternosPersonas
        Width: =1811
        X: =95
        Y: =296
        ZIndex: =17

        TextInput14_2 As text:
            BorderColor: =RGBA(15, 108, 189, 1)
            Default: =""
            DisabledBorderColor: =RGBA(15, 108, 189, 1)
            DisabledFill: =If(ThisItem.'Interno/Externo'="Externo",RGBA(255, 255, 255, 1),RGBA(214, 221, 224, 1))
            DisplayMode: =DisplayMode.Disabled
            Fill: =If(ThisItem.'Interno/Externo'="Externo",RGBA(255, 255, 255, 1),RGBA(214, 221, 224, 1))
            Height: =67
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =20
            RadiusBottomRight: =20
            RadiusTopLeft: =20
            RadiusTopRight: =20
            Width: =1785
            Y: =7
            ZIndex: =1

        Button12_1 As button:
            DisplayMode: =DisplayMode.Disabled
            Fill: =RGBA(214, 221, 224, 1)
            Height: =67
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =0
            RadiusBottomRight: =20
            RadiusTopLeft: =0
            RadiusTopRight: =20
            Text: =
            Width: =257
            X: =1527
            Y: =7
            ZIndex: =2

        Image1_3 As image:
            Fill: =RGBA(219, 219, 219, 1)
            Height: =60
            Image: |-
                =If(
                    IsBlank(Cmb_BuscarPersona_6.Selected.Email),
                    'no-fotos-1',
                    If(
                        IsBlank(UsuariosdeOffice365.UserPhotoV2(Cmb_BuscarPersona_6.Selected.Email)),
                        'no-fotos-1',
                        UsuariosdeOffice365.UserPhotoV2(Cmb_BuscarPersona_6.Selected.Email)
                    )
                )
                /*
                If(
                    CountRows(Col_MiEquipoWalmart) > 0;
                    If(
                        Rd_PersonasEquipos.Selected.Value = "Mis Personas";
                        If(
                            IfError(IsBlank(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico'));false;IsBlank(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico')));
                            'no-fotos-1';
                           IfError(UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico');'no-fotos-1';UsuariosdeOffice365.UserPhotoV2(ThisItem.'Correo Electrónico'))
                        )
                    )
                )
                */
            ImagePosition: =ImagePosition.Fill
            OnSelect: =Select(Parent)
            RadiusBottomLeft: =60
            RadiusBottomRight: =60
            RadiusTopLeft: =60
            RadiusTopRight: =60
            Width: =60
            X: =7
            Y: =10
            ZIndex: =3

        Cmb_BuscarPersona_6 As combobox:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(116, 116, 116, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            DefaultSelectedItems: |-
                =Table({DisplayName: ThisItem.Nombre_Persona, Email:ThisItem.'Correo Electrónico'})
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =If(ThisItem.'Interno/Externo'="Interno", RGBA(214, 221, 224, 1),RGBA(255, 255, 255, 1))
            DisplayFields: =["DisplayName","Email","Picture"]
            DisplayMode: =If(IsBlank(ThisItem.ID),DisplayMode.Edit,DisplayMode.Disabled)
            Height: |
                =40
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            Items: =Choices([@Lst_Persona].BuscarNombrePersona)
            OnChange: =Reset(Txt_Rut_4)
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            PressedFill: =RGBA(0, 121, 187, 1)
            SearchFields: =["DisplayName"]
            SearchItems: =Choices(Lst_Persona.BuscarNombrePersona,Cmb_BuscarPersona_6.SearchText)
            SelectionFill: =RGBA(0, 121, 187, 1)
            SelectMultiple: =false
            Template: =ListItemTemplate.Person
            Tooltip: =
            Width: |+
                =300
                
            X: =77
            Y: =20
            ZIndex: =4

        Txt_Rut_4 As text:
            Align: =Align.Center
            BorderColor: =RGBA(128, 128, 128, 1)
            BorderThickness: =0
            Default: |-
                =If(
                    !IsBlank(ThisItem.Jefe_Directo),
                    ThisItem.RUT,
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),RUT)
                )
            DelayOutput: =true
            DisabledBorderColor: =RGBA(255, 255, 255, 1)
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(Label12_4.Text="Interno", DisplayMode.Disabled, DisplayMode.Edit)
            Fill: =RGBA(214, 221, 224, 0.33)
            HintText: ="8765432-1"
            PaddingLeft: =10
            RadiusBottomLeft: =0
            RadiusBottomRight: =0
            RadiusTopLeft: =0
            RadiusTopRight: =0
            Tooltip: =
            Width: =125
            X: =768
            Y: =20
            ZIndex: =6

        Dtp_FechaIngreso_4 As datepicker:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            DefaultDate: |-
                =If(
                    !IsBlank(ThisItem.Jefe_Directo),
                    ThisItem.'Fecha de Ingreso',
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),'Fecha de Ingreso')
                )
            DisabledBorderColor: =RGBA(255, 255, 255, 1)
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(Label12_4.Text="Interno", DisplayMode.Disabled, DisplayMode.Edit)
            EndYear: =Year(Today())+100
            IconBackground: =RGBA(244, 244, 244, 1)
            IconFill: =RGBA(0, 121, 187, 1)
            IsEditable: =true
            PaddingBottom: =0
            PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
            Size: =13
            StartYear: =1899
            Tooltip: =
            Width: =140
            X: =904
            Y: =20
            ZIndex: =7

        Separator_6 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =390
            Y: =15
            ZIndex: =8

        Separator_7 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =763
            Y: |
                =5+10
            ZIndex: =9

        Separator_8 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =897
            Y: |
                =5+10
            ZIndex: =10

        Separator_9 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =1057
            Y: =10+5
            ZIndex: =11

        Separator_11 As rectangle:
            Height: =50
            OnSelect: =Select(Parent)
            Width: =1
            X: =1218
            Y: =15
            ZIndex: =14

        Cmb_Rol_4 As dropdown:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(149, 149, 149, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            Default: |-
                =If(
                    !IsBlank(ThisItem.Jefe_Directo),
                    ThisItem.Rol,
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),Rol)
                )
            DisabledBorderColor: =RGBA(255, 255, 255, 1)
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(Label12_4.Text="Interno", DisplayMode.Disabled, DisplayMode.Edit)
            Height: =47
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            Items: =Sort(Rol,Roles,SortOrder.Ascending)
            PressedFill: =RGBA(0, 121, 187, 1)
            Size: =12
            Tooltip: =
            Width: =283
            X: =1233
            Y: =15
            ZIndex: =15

        Icn_Pry_Cancelar_13 As icon.CancelBadge:
            Color: |-
                =Switch(
                    Label14_1.Text,
                    "Modificar",RGBA(54, 176, 75, 1),
                    "Agregar Usuario",RGBA(54, 176, 75, 1),
                    "Dar de baja",RGBA(255, 0, 0, 1),
                    "Cambiar Jefatura",RGBA(54, 176, 75, 1),
                    RGBA(0, 0, 0, 1)
                )
            DisplayMode: |-
                =If(
                    
                    If(ThisItem.Editando,IsBlank(Label12_4.Text),IsBlank(Cmb_BuscarPersona_6.Selected.Email))||
                    IsBlank(Dtp_FechaIngreso_4.SelectedDate)||
                    IsBlank(Txt_Rut_4.Text)||
                    IsBlank(Dpd_Empresa_5.Selected.ID),
                    DisplayMode.Disabled,
                    DisplayMode.Edit)
            Height: =35
            Icon: |-
                =Switch(
                    Label14_1.Text,
                    "Modificar",Icon.CheckBadge,
                    "Agregar Usuario",Icon.CheckBadge,
                    "Dar de baja",Icon.CancelBadge,
                    "Cambiar Jefatura",Icon.Sync,
                    Icon.Information
                )
            OnSelect: |-
                =Switch(
                    Label14_1.Text,
                    "Modificar",RGBA(54, 176, 75, 1),
                    "Agregar Usuario",
                    
                    //-------------------------------------------------
                
                    /*Mostrar Spinner Cargando*/
                Set(_VarMostrarCargando,true);
                    Patch(
                        Lst_Persona,
                            If( 
                                IsBlank(LookUp(Lst_Persona, Usuario = Upper(_var_PersonaSeleccionada.Usuario))),
                                    Defaults(Lst_Persona),
                                    LookUp(Lst_Persona, Usuario = Upper(_var_PersonaSeleccionada.Usuario))
                            ),
                            {
                                GerenciaOrigen_0: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_0),
                                GerenciaOrigen_1: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_1),
                                GerenciaOrigen: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen), 
                                Nombre_Persona: TextInputCanvas1_1.Value,
                                RUT: Txt_Rut_4.Text,
                                'Interno/Externo': "Externo",
                                Jefe_Directo: _VarUsuarioJefe,
                                ID_Proveedor: Dpd_Empresa_5.Selected.ID,
                                Empresa:Dpd_Empresa_5.Selected.Razon_Social_Proveedor, 
                                'Fecha de Ingreso': Dtp_FechaIngreso_4.SelectedDate,
                                'Ubicación Laboral': Cmb_Rol_5.Selected,
                                'Correo Electrónico': Cmb_BuscarPersona_6.Selected.Email,
                                Rol: Cmb_Rol_4.Selected.Roles,
                                Estado: "Activo",
                                'Considera Head Count':{Value:"NO"},
                                Usuario: If(ThisItem.Editando, ThisItem.Usuario,Upper(Label6.Text)),
                                Categoria: ThisItem.Categoria
                            }
                    );
                    Patch(
                        Col_MiEquipoWalmart,
                            ThisItem,
                            {
                                GerenciaOrigen_0: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_0),
                                GerenciaOrigen_1: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_1),
                                GerenciaOrigen: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen), 
                                Nombre_Persona: TextInputCanvas1_1.Value,
                                RUT: Txt_Rut_4.Text,
                                'Interno/Externo': "Externo",
                                Jefe_Directo: _VarUsuarioJefe,
                                ID_Proveedor: Dpd_Empresa_5.Selected.ID,
                                Empresa:Dpd_Empresa_5.Selected.Razon_Social_Proveedor, 
                                'Fecha de Ingreso': Dtp_FechaIngreso_4.SelectedDate,
                                'Ubicación Laboral': Cmb_Rol_5.Selected,
                                'Correo Electrónico': Cmb_BuscarPersona_6.Selected.Email,
                                Rol: Cmb_Rol_4.Selected.Roles,
                                Estado: "Activo",
                                'Considera Head Count':{Value:"NO"},
                                Usuario: If(ThisItem.Editando, "aleatorio",Upper(Label6.Text)),
                                Categoria: ThisItem.Categoria  
                            }
                    );
                    
                
                    //--------------------------------------------------
                    
                    ,
                    "Dar de baja",UpdateContext({var_ModalDardeBaja:true}),
                    "Cambiar Jefatura",UpdateContext({var_ModalCambioJefatura:true}),
                    RGBA(0, 0, 0, 1)
                );
                Set(_var_PersonaSeleccionada,ThisItem);
                Set(Var_BitacoraCambios,Var_BitacoraCambios&"|Se agrega a: "& TextInputCanvas1_1.Value)
            Tooltip: =
            Visible: =Label12_4.Text="Externo"
            Width: =35
            X: =1739
            Y: =23
            ZIndex: =17

        Label14_1 As label:
            Align: =Align.Center
            Height: =50
            OnSelect: =Select(Parent)
            Size: =12
            Text: |-
                =If(IsBlank(ThisItem.ID),
                   
                //Validar si ya esta asignado a otro jefe
                If(IsBlank(LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),Jefe_Directo)),
                 "Agregar Usuario",
                
                If(LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),Jefe_Directo)=_VarUsuarioJefe,
                "Ya asignado",
                "Cambiar Jefatura")
                ),
                        If(
                            Txt_Rut_4.Text<>ThisItem.RUT||
                            Dtp_FechaIngreso_4.SelectedDate<>ThisItem.'Fecha de Ingreso'||
                            Cmb_Rol_4.Selected.Roles<>ThisItem.Rol||
                            Text(Dpd_Empresa_5.Selected.ID)<>ThisItem.ID_Proveedor,
                            "Modificar",
                            "Dar de baja"
                        )
                )
            Visible: =Label12_4.Text="Externo"
            Width: =106
            X: =1600
            Y: =15
            ZIndex: =18

        "TextInputCanvas1_1 As 'Text input'":
            DisplayMode: =DisplayMode.Edit
            FontSize: =18
            Height: =40
            Placeholder: ="Nombre de nueva Persona"
            Value: =ThisItem.Nombre_Persona
            Visible: =ThisItem.Editando
            Width: =300
            X: =77
            Y: =20
            ZIndex: =21

        Cmb_Rol_5 As dropdown:
            BorderColor: =
            BorderStyle: =BorderStyle.None
            BorderThickness: =0
            ChevronBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledBackground: =RGBA(0, 0, 0, 0)
            ChevronDisabledFill: =RGBA(149, 149, 149, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =RGBA(0, 121, 187, 1)
            Default: |-
                =If(
                    !IsBlank(ThisItem.Jefe_Directo),
                    ThisItem.'Ubicación Laboral'.Value,
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),'Ubicación Laboral'.Value)
                )
            DisabledBorderColor: =RGBA(255, 255, 255, 1)
            DisabledColor: =RGBA(53, 61, 63, 1)
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayMode: =If(Label12_4.Text="Interno", DisplayMode.Disabled, DisplayMode.Edit)
            Height: =47
            HoverBorderColor: =RGBA(0, 121, 187, 1)
            Items: =["Chile","Extranjero"]
            PressedFill: =RGBA(0, 121, 187, 1)
            Size: =12
            Tooltip: =
            Width: =153
            X: =1064
            Y: =16
            ZIndex: =22

        Label12_4 As label:
            Align: =Align.Center
            Height: =18
            OnSelect: =Select(Parent)
            Text: |-
                =    If(ThisItem.Editando,
                    "Externo",
                    If(IsBlank(LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),'Interno/Externo')),
                    "Externo",
                    LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),'Interno/Externo')
                    )
                    )
            Visible: =false
            Width: =130
            X: =1600
            ZIndex: =23

        Label6 As label:
            OnSelect: =Select(Parent)
            Text: |-
                =Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result
            Visible: =false
            X: =315
            Y: =34
            ZIndex: =24

        Dpd_Empresa_5 As combobox:
            BorderColor: =RGBA(0, 0, 0, 0)
            BorderThickness: =0
            ChevronBackground: =RGBA(56, 96, 178,0)
            ChevronDisabledBackground: =RGBA(255, 255, 255, 1)
            ChevronDisabledFill: =RGBA(106, 122, 127, 1)
            ChevronFill: =RGBA(0, 121, 187, 1)
            ChevronHoverBackground: =
            DefaultSelectedItems: |-
                =If(Label12_4.Text="Interno",Filter(Lst_Proveedores,ID=93),
                If(
                    !IsBlank(ThisItem.Jefe_Directo),
                    Filter(Lst_Proveedores,ID=Value(ThisItem.ID_Proveedor)),
                    Filter(Lst_Proveedores,ID=Value(LookUp(Col_BD_Persona, Usuario = Upper(Last(ForAll(Split(First(ForAll(Split(Cmb_BuscarPersona_6.Selected.Claims,"@"), {Result: ThisRecord.Value})).Result,"|"), {Result: ThisRecord.Value})).Result),ID_Proveedor)))
                ))
            DisabledBorderColor: =RGBA(255, 255, 255, 1)
            DisabledFill: =RGBA(255, 255, 255, 1)
            DisplayFields: =["Razon_Social"]
            DisplayMode: =If(Label12_4.Text="Interno", DisplayMode.Disabled, DisplayMode.Edit)
            Items: =SortByColumns(Lst_Proveedores,"Razon_Social",SortOrder.Ascending)
            OnSelect: =Select(Parent)
            SearchFields: =["RUT"]
            SearchItems: =Search(SortByColumns(Lst_Proveedores,"Razon_Social",SortOrder.Ascending),Dpd_Empresa_5.SearchText,RUT)
            Size: =12
            Width: =350
            X: =398
            Y: =20
            ZIndex: =26

    Btn_AgregarExternos_3 As button:
        Fill: =RGBA(72, 163, 62, 1)
        HoverFill: =RGBA(255, 255, 255, 0.63)
        OnSelect: |
            =UpdateContext({_VarMostrarBarraBloqueo:true});
            Set(_VarNuevoIDPErsona,"Usu-" & GUID());
            Patch(Col_MiEquipoWalmart,Defaults(Col_MiEquipoWalmart),
            {
                'Interno/Externo':"Externo",
                ID_Proveedor:Cmb_BuscarPersona_5.Selected.ID,
                Nombre_Persona:" ",
                Tipo_Usuario:"Manual",
                Editando:true,
                Categoria:"Subcontratación Servicios",
                Usuario:Mid(GUID(),1,8)
            }
            )
        PaddingTop: =2.5
        PressedFill: =RGBA(255, 255, 255, 0.68)
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Size: =14
        Text: ="Crear persona"
        Tooltip: |
            =If(
                Rd_PersonasEquipos.Selected.Value = "Mis Equipos",
                "Agregar Nuevo Equipo",
                "Agregar Nueva Persona"
            )
        Visible: =_Var_ExternosPersonas
        Width: =290
        X: =1268
        Y: =241
        ZIndex: =18

    ModalPersonas_CambioJefe As groupContainer.manualLayoutContainer:
        Fill: =RGBA(202, 202, 202, 0.78)
        Height: =1050
        Visible: =var_ModalCambioJefatura
        Width: =1920
        ZIndex: =20

        Label25_2 As label:
            BorderColor: =RGBA(219, 219, 219, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =287
            PaddingLeft: =25
            PaddingRight: =20
            Size: =14
            Text: |-
                ="
                
                
                
                Estas a punto de asignar a " &_var_PersonaSeleccionada.Nombre_Persona& " bajo tu cargo.
                
                Se enviará un correo a " & First(UsuariosdeOffice365.SearchUser({searchTerm:_var_PersonaSeleccionada.Jefe_Directo})).DisplayName & " y al equipo de Agile Portfolio informando este ajuste."
            VerticalAlign: =VerticalAlign.Top
            Width: =715
            X: =585
            Y: =350
            ZIndex: =1

        Btn_Cambiar_Jefatura_6 As button:
            DisplayMode: |-
                =If(
                    !IsBlank(_VarNuevoIDPErsona),
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =_VarColoresApp.AzulFondo
            Height: =52
            OnSelect: |-
                =UpdateContext({var_ModalCambioJefatura:false})
            Text: ="Cancelar"
            Width: =179
            X: =726
            Y: =563
            ZIndex: =3

        Btn_Cambiar_Jefatura_7 As button:
            DisplayMode: |-
                =If(
                    !IsBlank(_VarNuevoIDPErsona),
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =_VarColoresApp.AzulFondo
            Height: =52
            OnSelect: |-
                =Office365Outlook.SendEmailV2(
                    "AgilePortfolio@wal-mart.com;" &LookUp(Col_BD_Persona, Usuario = Txt_JefeDirecto.Text, 'Correo Electrónico'),
                    "Cambio de Jefatura en un recurso de BIND",
                  "<p>Hola!<br>
                <br>He asignado a mi cargo a una persona que estaba a tu nombre en el módulo de personas de BIND.<br>"
                &"<br><br><strong>Usuario ajustado: </strong>" & Cmb_BuscarPersona.Selected.DisplayName&" ("& Txt_Usuario.Text &")"
                &"<br><strong>Jefe Anterior: </strong>"& Cmb_BuscarJefe.Selected.DisplayName &" ("& Txt_JefeDirecto.Text &")"
                &"<br><strong>Nuevo Jefe: </strong>" & User().FullName&" ("& _VarUsuarioJefe &")"
                &"<br><br>
                </p>"
                );
                Patch(Lst_Persona,LookUp(Lst_Persona, Usuario = Upper(Txt_Usuario.Text)),{
                    GerenciaOrigen_0: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_0),
                    GerenciaOrigen_1: LookUp(Lst_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen_1),
                    GerenciaOrigen: LookUp(Col_BD_Persona, Usuario = _VarUsuarioJefe, GerenciaOrigen),
                    Jefe_Directo:_VarUsuarioJefe
                }) ;
                
                ClearCollect(Col_BD_Persona, Filter(Lst_Persona, Estado = "Activo"));
                ClearCollect(Col_MiEquipoWalmart,SortByColumns(Filter(Lst_Persona, Jefe_Directo = _VarUsuarioJefe && Estado = "Activo"),"Nombre_Persona",SortOrder.Descending));
                Notify("Se ha asignado " &Cmb_BuscarPersona.Selected.DisplayName &" a tu Jefatura!",NotificationType.Success);
                UpdateContext({_VarMostrarBarraBloqueo:false});
                Clear(Col_EquiposPersonas);
                Set(_VarNuevoIDPErsona,Blank());
                Reset(Cmb_BuscarMiEquipo);
                Set(_VarUsuarioSelect,Blank());
                ResetForm(Frm_EditarPersona);
                Set(_Var_sol_cambioJefe,false)
            Text: ="Asignar a mi"
            Width: =179
            X: =983
            Y: =563
            ZIndex: =4

        Label26_2 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =_VarColoresApp.AzulparaCabeceras
            FontWeight: =FontWeight.Semibold
            Height: =46
            Size: =15
            Text: ="Confirmar Cambios"
            Width: =715
            X: =585
            Y: =350
            ZIndex: =5

    ModalDardeBaja As groupContainer.manualLayoutContainer:
        Fill: =RGBA(202, 202, 202, 0.78)
        Height: =1050
        Visible: =var_ModalDardeBaja
        Width: =1920
        ZIndex: =21

        Label25_3 As label:
            BorderColor: =RGBA(219, 219, 219, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =287
            PaddingLeft: =25
            PaddingRight: =20
            Size: =14
            Text: |-
                ="
                
                
                
                Estas a punto de dar de baja a " &_var_PersonaSeleccionada.Nombre_Persona& ".
                
                Se quitará el usuario de todos los equipos donde este asignado actualmente."
            VerticalAlign: =VerticalAlign.Top
            Width: =715
            X: =585
            Y: =350
            ZIndex: =1

        Btn_Cambiar_Jefatura_8 As button:
            DisplayMode: |-
                =If(
                    !IsBlank(_VarNuevoIDPErsona),
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =_VarColoresApp.AzulFondo
            Height: =52
            OnSelect: |-
                =UpdateContext({var_ModalDardeBaja:false})
            Text: ="Cancelar"
            Width: =179
            X: =726
            Y: =563
            ZIndex: =3

        Btn_Cambiar_Jefatura_9 As button:
            DisplayMode: |-
                =If(
                    !IsBlank(_VarNuevoIDPErsona),
                    DisplayMode.Edit,
                    DisplayMode.Disabled
                )
            Fill: =_VarColoresApp.AzulFondo
            FontWeight: =FontWeight.Bold
            Height: =52
            OnSelect: |-
                =Set(_VarMostrarCargando,true);
                
                Patch(
                        Lst_Persona,
                        LookUp(Lst_Persona, Usuario = _var_PersonaSeleccionada.Usuario && Estado = "Activo"),
                        {
                            Estado: "Inactivo",
                            FechaCese: Today(),
                            CesadoPor: _Perfil.mail,
                            RazondeBaja: "Baja por jefatura"
                        }
                    );
                
                    ClearCollect(Col_EquipodelUsuario,Filter(Ingresos_Ceses_Personas, Usuario = _var_PersonaSeleccionada.Usuario && Estado = "Activo"));
                
                ForAll(
                    Col_EquipodelUsuario As EquiposAsignados,
                    Patch(
                        Ingresos_Ceses_Personas,
                        LookUp(Ingresos_Ceses_Personas, ID = EquiposAsignados.ID),
                        {
                            Estado: "Inactivo",
                            FechaCese: Today(),
                            CesadoPor: _Perfil.mail,
                            RazondeBaja: "Baja por jefatura"
                        }
                    )
                );
                
                ClearCollect(Col_MiEquipoWalmart,SortByColumns(Filter(Lst_Persona, Jefe_Directo = _VarUsuarioJefe && Estado = "Activo"),"Nombre_Persona",SortOrder.Descending));
                Notify("Se elimino de manera correcta al usuario.",NotificationType.Success,10000);
                /*Ocultar Spinner Cargando*/
                Set(Var_BitacoraCambios,Var_BitacoraCambios&"|Se da de baja a: "& _var_PersonaSeleccionada.Nombre_Persona)
            Text: ="Dar de baja"
            Width: =179
            X: =983
            Y: =563
            ZIndex: =4

        Label26_3 As label:
            Align: =Align.Center
            Color: =RGBA(255, 255, 255, 1)
            Fill: =_VarColoresApp.AzulparaCabeceras
            FontWeight: =FontWeight.Semibold
            Height: =46
            Size: =15
            Text: ="Confirmar Cambios"
            Width: =715
            X: =585
            Y: =350
            ZIndex: =5

    Button25_7 As button:
        Fill: |-
            =If(
                _VarEquipo="MiEquipo",
                RGBA(22, 196, 247,1),
                RGBA(56, 96, 178, 1)
            )
        OnSelect: |-
            =Set(_VarEquipo,"MiEquipo");
            Navigate(ModuloEquipoV1,ScreenTransition.Fade)
        Text: ="Confirmar Personas a Control de Gestión"
        Visible: =true//IsBlank(LookUp(Lst_ConfirmacionManagersF30,ID=Value(Param("ID_Request"))).Fechaconfirmacion)
        Width: =466
        X: =1379
        Y: =955
        ZIndex: =22

    Txt_BuscadorPersona_4 As text:
        BorderColor: =RGBA(53, 61, 63, 1)
        Default: =""
        Height: =1
        HintText: ="Buscar Persona, Rol o Tipo"
        RadiusBottomLeft: =20
        RadiusBottomRight: =20
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Width: =1800
        X: =95
        Y: =200
        ZIndex: =23

    Btn_AgregarExternos_4 As button:
        Fill: =If(!_Var_ExternosPersonas , RGBA(214, 221, 224, 1), RGBA(40, 134, 222, 1))
        HoverFill: =RGBA(255, 255, 255, 0.63)
        OnSelect: =Set(_Var_ExternosPersonas,true)
        PaddingTop: =2.5
        PressedFill: =RGBA(255, 255, 255, 0.68)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Size: =14
        Text: ="Ver Externos"
        Tooltip: |
            =If(
                Rd_PersonasEquipos.Selected.Value = "Mis Equipos",
                "Agregar Nuevo Equipo",
                "Agregar Nueva Persona"
            )
        Width: =290
        X: =1583
        Y: =160
        ZIndex: =24

    Btn_AgregarExternos_5 As button:
        Fill: =If(_Var_ExternosPersonas , RGBA(214, 221, 224, 1), RGBA(40, 134, 222, 1))
        HoverFill: =RGBA(255, 255, 255, 0.63)
        OnSelect: =Set(_Var_ExternosPersonas,false)
        PaddingTop: =2.5
        PressedFill: =RGBA(255, 255, 255, 0.68)
        RadiusBottomLeft: =0
        RadiusBottomRight: =0
        RadiusTopLeft: =20
        RadiusTopRight: =20
        Size: =14
        Text: ="Ver Internos"
        Tooltip: |
            =If(
                Rd_PersonasEquipos.Selected.Value = "Mis Equipos",
                "Agregar Nuevo Equipo",
                "Agregar Nueva Persona"
            )
        Width: =290
        X: =1292
        Y: =160
        ZIndex: =25

    Gp_Buscador_1 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =43

        Txt_BuscadorPersona_2 As text:
            BorderColor: =RGBA(53, 61, 63, 1)
            Default: =""
            Height: =46
            HintText: ="Buscar Persona, Rol o Tipo"
            RadiusBottomLeft: =20
            RadiusBottomRight: =20
            RadiusTopLeft: =20
            RadiusTopRight: =20
            Width: =1
            X: =95
            Y: =219
            ZIndex: =11

        Icon1_4 As icon.Search:
            BorderStyle: =BorderStyle.None
            Color: =RGBA(53, 61, 63, 1)
            Height: =40
            Icon: =Icon.Search
            OnSelect: =Set(_VarMostrarBuscar, !_VarMostrarBuscar)
            Tooltip: ="Buscar Persona"
            X: =106
            Y: =220
            ZIndex: =12

        Label27_2 As label:
            Color: =RGBA(79, 90, 94, 1)
            Font: =Font.Lato
            FontWeight: =FontWeight.Lighter
            Height: =46
            OnSelect: =Set(_VarMostrarBuscar, !_VarMostrarBuscar)
            Size: =15
            Text: ="Buscar Persona, Rol o Tipo"
            Width: =300
            X: =163
            Y: =217
            ZIndex: =13

